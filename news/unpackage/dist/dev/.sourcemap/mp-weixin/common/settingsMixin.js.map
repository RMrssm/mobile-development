{"version":3,"file":"settingsMixin.js","sources":["common/settingsMixin.js"],"sourcesContent":["// common/settingsMixin.js\n// 这个 Mixin 会被所有页面引入，用于自动管理主题和字体大小\nexport const settingsMixin = {\n\tdata() {\n\t\treturn {\n\t\t\tappTheme: 'light', // 'light' 或 'theme-dark'\n\t\t\tappFontSize: 'font-size-medium' // 'font-size-small', 'font-size-medium', 'font-size-large'\n\t\t};\n\t},\n\tonShow() {\n\t\t// 每次页面显示时，都从本地存储读取最新的设置\n\t\tthis.loadSettings();\n\t},\n\tmethods: {\n\t\tloadSettings() {\n\t\t\t// 从本地存储获取设置，如果没有，则使用默认值\n\t\t\tconst settings = uni.getStorageSync('appSettings') || {\n\t\t\t\ttheme: 'light',\n\t\t\t\tfontSize: 'medium'\n\t\t\t};\n\t\t\t\n\t\t\tthis.appTheme = settings.theme;\n\t\t\tthis.appFontSize = 'font-size-' + settings.fontSize;\n\t\t\t\n\t\t\t// === 修复主题切换的关键步骤：将主题类应用到全局文档根元素 (<html>) ===\n\t\t\t// 在 uni-app 环境中，document.documentElement 对应 HTML 根元素\n\t\t\tconst rootElement = document.documentElement; \n\t\t\tif (rootElement) {\n\t\t\t\t// 1. 移除旧主题类\n\t\t\t\trootElement.classList.remove('theme-dark');\n\t\t\t\trootElement.classList.remove('light');\n\t\t\t\t\n\t\t\t\t// 2. 应用新主题类\n\t\t\t\tif (this.appTheme === 'theme-dark') {\n\t\t\t\t\trootElement.classList.add('theme-dark');\n\t\t\t\t} else {\n\t\t\t\t\trootElement.classList.add('light'); \n\t\t\t\t}\n\t\t\t}\n\t\t\t// ==========================================================\n\t\t}\n\t}\n};"],"names":["uni"],"mappings":";;AAEY,MAAC,gBAAgB;AAAA,EAC5B,OAAO;AACN,WAAO;AAAA,MACN,UAAU;AAAA;AAAA,MACV,aAAa;AAAA;AAAA,IAChB;AAAA,EACE;AAAA,EACD,SAAS;AAER,SAAK,aAAY;AAAA,EACjB;AAAA,EACD,SAAS;AAAA,IACR,eAAe;AAEd,YAAM,WAAWA,cAAAA,MAAI,eAAe,aAAa,KAAK;AAAA,QACrD,OAAO;AAAA,QACP,UAAU;AAAA,MACd;AAEG,WAAK,WAAW,SAAS;AACzB,WAAK,cAAc,eAAe,SAAS;AAI3C,YAAM,cAAc,SAAS;AAC7B,UAAI,aAAa;AAEhB,oBAAY,UAAU,OAAO,YAAY;AACzC,oBAAY,UAAU,OAAO,OAAO;AAGpC,YAAI,KAAK,aAAa,cAAc;AACnC,sBAAY,UAAU,IAAI,YAAY;AAAA,QAC3C,OAAW;AACN,sBAAY,UAAU,IAAI,OAAO;AAAA,QACjC;AAAA,MACD;AAAA,IAED;AAAA,EACD;AACF;;"}