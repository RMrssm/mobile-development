{"version":3,"file":"settings.js","sources":["pages/settings/settings.vue","../../../program/HBuilderX.4.85.2025110510/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvc2V0dGluZ3Mvc2V0dGluZ3MudnVl"],"sourcesContent":["<template>\n\t<!-- 1. 绑定根 class，应用主题和字体 -->\n\t<view class=\"container\" :class=\"[appTheme, appFontSize]\">\n\t\t\n\t\t<view class=\"setting-group\">\n\t\t\t<view class=\"setting-item\">\n\t\t\t\t<view class=\"left\">\n\t\t\t\t\t<text class=\"title\">黑夜模式</text>\n\t\t\t\t\t<text class=\"desc\">（22:00 - 06:00 自动开启）</text>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"right\">\n\t\t\t\t\t<!-- 切换主题 -->\n\t\t\t\t\t<switch :checked=\"theme === 'theme-dark'\" @change=\"onThemeChange\" color=\"#3489F6\" />\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\t\t\n\t\t<view class=\"setting-group\">\n\t\t\t<view class=\"setting-item\">\n\t\t\t\t<view class=\"left\">\n\t\t\t\t\t<text class=\"title\">字体大小</text>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t<view class=\"font-size-selector\">\n\t\t\t\t<text class=\"label\" :class=\"{'active': fontSize === 'small'}\" @click=\"onFontChange('small')\">小</text>\n\t\t\t\t<view class=\"slider-wrapper\">\n\t\t\t\t\t<!-- 滑块控制字号 -->\n\t\t\t\t\t<slider \n\t\t\t\t\t\t:value=\"fontSizeIndex\" \n\t\t\t\t\t\t@changing=\"onSliderChange\" \n\t\t\t\t\t\tmin=\"0\" \n\t\t\t\t\t\tmax=\"2\" \n\t\t\t\t\t\tstep=\"1\"\n\t\t\t\t\t\tactiveColor=\"#3489F6\"\n\t\t\t\t\t\tbackgroundColor=\"#e0e0e0\"\n\t\t\t\t\t\tblock-size=\"20\"\n\t\t\t\t\t/>\n\t\t\t\t</view>\n\t\t\t\t<text class=\"label\" :class=\"{'active': fontSize === 'large'}\" @click=\"onFontChange('large')\">大 (老人模式)</text>\n\t\t\t</view>\n\t\t</view>\n\n\t\t<view class=\"setting-group\">\n\t\t\t<view class=\"setting-item\">\n\t\t\t\t<view class=\"left\">\n\t\t\t\t\t<text class=\"title\">清除缓存</text>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"right\">\n\t\t\t\t\t<text class=\"cache-size\">{{cacheSize}} MB</text>\n\t\t\t\t\t<text class=\"arrow\">&gt;</text>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t<view class=\"setting-item\">\n\t\t\t\t<view class=\"left\">\n\t\t\t\t\t<text class=\"title\">意见反馈</text>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"right\">\n\t\t\t\t\t<text class=\"arrow\">&gt;</text>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\t\t\n\t\t<view class=\"brand-footer\">—— 由 金建楠 App 提供 ——</view>\n\n\t</view>\n</template>\n\n<script>\n// 2. 引入 Mixin\nimport { settingsMixin } from '../../common/settingsMixin.js';\n\nexport default {\n\t// 3. 注册 Mixin\n\tmixins: [settingsMixin],\n\tdata() {\n\t\treturn {\n\t\t\ttheme: 'light',\n\t\t\tfontSize: 'medium', // 'small', 'medium', 'large'\n\t\t\tcacheSize: '1.2' // 模拟缓存大小\n\t\t};\n\t},\n\tcomputed: {\n\t\t// 计算 slider 的当前索引: small(0), medium(1), large(2)\n\t\tfontSizeIndex() {\n\t\t\tif (this.fontSize === 'small') return 0;\n\t\t\tif (this.fontSize === 'large') return 2;\n\t\t\treturn 1;\n\t\t}\n\t},\n\tonLoad() {\n\t\t// 页面加载时，从本地存储初始化 data\n\t\tconst settings = uni.getStorageSync('appSettings') || {\n\t\t\ttheme: 'light',\n\t\t\tfontSize: 'medium'\n\t\t};\n\t\tthis.theme = settings.theme;\n\t\tthis.fontSize = settings.fontSize;\n\t},\n\tmethods: {\n\t\t/**\n\t\t * 保存设置到本地存储并更新全局状态\n\t\t */\n\t\tsaveSettings() {\n\t\t\tconst settings = {\n\t\t\t\ttheme: this.theme,\n\t\t\t\tfontSize: this.fontSize\n\t\t\t};\n\t\t\tuni.setStorageSync('appSettings', settings);\n\t\t\t// 立即更新当前页面的 Mixin 数据，使其生效\n\t\t\tthis.loadSettings();\n\t\t},\n\t\t\n\t\t/**\n\t\t * 切换黑夜模式\n\t\t */\n\t\tonThemeChange(e) {\n\t\t\t// e.detail.value 是 switch 的当前状态 (true/false)\n\t\t\tthis.theme = e.detail.value ? 'theme-dark' : 'light';\n\t\t\tthis.saveSettings();\n\t\t},\n\t\t\n\t\t/**\n\t\t * 点击标签切换字号\n\t\t */\n\t\tonFontChange(size) {\n\t\t\tthis.fontSize = size;\n\t\t\tthis.saveSettings();\n\t\t},\n\t\t\n\t\t/**\n\t\t * 拖动滑块切换字号\n\t\t */\n\t\tonSliderChange(e) {\n\t\t\tconst index = e.detail.value;\n\t\t\tif (index === 0) {\n\t\t\t\tthis.fontSize = 'small';\n\t\t\t} else if (index === 1) {\n\t\t\t\tthis.fontSize = 'medium';\n\t\t\t} else {\n\t\t\t\tthis.fontSize = 'large';\n\t\t\t}\n\t\t\tthis.saveSettings();\n\t\t}\n\t}\n};\n</script>\n\n<style>\n/* 使用 CSS 变量 */\n.container {\n\tbackground-color: var(--bg-color);\n\tmin-height: 100vh;\n\tpadding: 20rpx 0;\n}\n.setting-group {\n\tbackground-color: var(--card-bg-color);\n\tmargin: 20rpx 30rpx;\n\tborder-radius: 16rpx;\n\tbox-shadow: 0 4rpx 15rpx var(--shadow-color);\n\toverflow: hidden;\n}\n.setting-item {\n\tdisplay: flex;\n\tjustify-content: space-between;\n\talign-items: center;\n\tpadding: 30rpx;\n\tborder-bottom: 1rpx solid var(--border-color);\n}\n.setting-item:last-child {\n\tborder-bottom: none;\n}\n.left {\n\tdisplay: flex;\n\tflex-direction: column;\n}\n.title {\n\tfont-size: var(--font-size-base);\n\tcolor: var(--text-color-primary);\n\tfont-weight: 500;\n}\n.desc {\n\tfont-size: 24rpx;\n\tcolor: var(--text-color-secondary);\n\tmargin-top: 5rpx;\n}\n.right {\n\tdisplay: flex;\n\talign-items: center;\n}\n.arrow {\n\tfont-size: 30rpx;\n\tcolor: var(--text-color-placeholder);\n\tmargin-left: 10rpx;\n}\n.cache-size {\n\tfont-size: 28rpx;\n\tcolor: var(--text-color-secondary);\n}\n\n/* 字体设置 */\n.font-size-selector {\n\tdisplay: flex;\n\talign-items: center;\n\tpadding: 30rpx;\n}\n.label {\n\tfont-size: 28rpx;\n\tcolor: var(--text-color-secondary);\n\ttransition: all 0.2s;\n}\n.label.active {\n\tfont-size: 30rpx;\n\tcolor: var(--brand-color);\n\tfont-weight: bold;\n}\n.slider-wrapper {\n\tflex: 1;\n\tmargin: 0 30rpx;\n}\n.brand-footer {\n\ttext-align: center;\n\tpadding: 80rpx 0 40rpx;\n\tcolor: var(--text-color-placeholder);\n\tfont-size: 24rpx;\n}\n</style>","import MiniProgramPage from 'E:/project/HBuiderX/news/pages/settings/settings.vue'\nwx.createPage(MiniProgramPage)"],"names":["settingsMixin","uni"],"mappings":";;;AAuEA,MAAK,YAAU;AAAA;AAAA,EAEd,QAAQ,CAACA,qBAAAA,aAAa;AAAA,EACtB,OAAO;AACN,WAAO;AAAA,MACN,OAAO;AAAA,MACP,UAAU;AAAA;AAAA,MACV,WAAW;AAAA;AAAA;EAEZ;AAAA,EACD,UAAU;AAAA;AAAA,IAET,gBAAgB;AACf,UAAI,KAAK,aAAa;AAAS,eAAO;AACtC,UAAI,KAAK,aAAa;AAAS,eAAO;AACtC,aAAO;AAAA,IACR;AAAA,EACA;AAAA,EACD,SAAS;AAER,UAAM,WAAWC,cAAAA,MAAI,eAAe,aAAa,KAAK;AAAA,MACrD,OAAO;AAAA,MACP,UAAU;AAAA;AAEX,SAAK,QAAQ,SAAS;AACtB,SAAK,WAAW,SAAS;AAAA,EACzB;AAAA,EACD,SAAS;AAAA;AAAA;AAAA;AAAA,IAIR,eAAe;AACd,YAAM,WAAW;AAAA,QAChB,OAAO,KAAK;AAAA,QACZ,UAAU,KAAK;AAAA;AAEhBA,oBAAAA,MAAI,eAAe,eAAe,QAAQ;AAE1C,WAAK,aAAY;AAAA,IACjB;AAAA;AAAA;AAAA;AAAA,IAKD,cAAc,GAAG;AAEhB,WAAK,QAAQ,EAAE,OAAO,QAAQ,eAAe;AAC7C,WAAK,aAAY;AAAA,IACjB;AAAA;AAAA;AAAA;AAAA,IAKD,aAAa,MAAM;AAClB,WAAK,WAAW;AAChB,WAAK,aAAY;AAAA,IACjB;AAAA;AAAA;AAAA;AAAA,IAKD,eAAe,GAAG;AACjB,YAAM,QAAQ,EAAE,OAAO;AACvB,UAAI,UAAU,GAAG;AAChB,aAAK,WAAW;AAAA,MACjB,WAAW,UAAU,GAAG;AACvB,aAAK,WAAW;AAAA,aACV;AACN,aAAK,WAAW;AAAA,MACjB;AACA,WAAK,aAAY;AAAA,IAClB;AAAA,EACD;AACD;;;;;;;;;;;;;;;;;AC/IA,GAAG,WAAW,eAAe;"}